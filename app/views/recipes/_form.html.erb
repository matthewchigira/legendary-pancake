<style>
  .recipe-form {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: 2rem;
    box-shadow: var(--shadow);
    border: 1px solid var(--border);
    max-width: 700px;
  }
  .recipe-form .form-group {
    margin-bottom: 1.25rem;
  }
  .recipe-form .form-group label {
    display: block;
    margin-bottom: 0.375rem;
    font-weight: 500;
    font-size: 0.8rem;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.025em;
  }
  .recipe-form .form-group input,
  .recipe-form .form-group select,
  .recipe-form .form-group textarea {
    width: 100%;
    padding: 0.5rem 0.75rem;
    border: 1px solid var(--border);
    border-radius: var(--radius);
    font-size: 0.875rem;
    font-family: inherit;
    color: var(--text-primary);
    background: var(--surface);
    transition: border-color 0.15s ease, box-shadow 0.15s ease;
  }
  .recipe-form .form-group input:focus,
  .recipe-form .form-group select:focus,
  .recipe-form .form-group textarea:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(79,70,229,0.1);
  }
  .recipe-form .form-group textarea { resize: vertical; min-height: 100px; }
  .form-row {
    display: flex;
    gap: 1rem;
  }
  .form-row .form-group { flex: 1; }
  .ingredients-fields {
    margin: 1.25rem 0;
    padding: 1.25rem;
    background: var(--bg);
    border-radius: var(--radius);
    border: 1px solid var(--border);
  }
  .ingredients-fields h4 {
    margin-bottom: 0.75rem;
    color: var(--text-primary);
    font-size: 0.9rem;
    font-weight: 600;
  }
  .ingredient-row {
    display: flex;
    gap: 0.5rem;
    align-items: center;
    margin-bottom: 0.5rem;
  }
  .ingredient-row input {
    flex: 1;
    padding: 0.4rem 0.6rem;
    border: 1px solid var(--border);
    border-radius: var(--radius);
    font-size: 0.825rem;
    font-family: inherit;
    color: var(--text-primary);
    transition: border-color 0.15s ease, box-shadow 0.15s ease;
  }
  .ingredient-row input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(79,70,229,0.1);
  }
  .ingredient-row .remove-link {
    color: var(--danger);
    text-decoration: none;
    font-weight: bold;
    font-size: 1.1rem;
    width: 1.5rem;
    text-align: center;
    line-height: 1;
    transition: opacity 0.15s ease;
  }
  .ingredient-row .remove-link:hover { opacity: 0.7; }
  .form-actions {
    display: flex;
    gap: 0.75rem;
    margin-top: 1.5rem;
    padding-top: 1.5rem;
    border-top: 1px solid var(--border);
  }
  .error-messages {
    background: var(--danger-bg);
    border: 1px solid #fecaca;
    color: #991b1b;
    padding: 0.75rem 1rem;
    border-radius: var(--radius);
    margin-bottom: 1.25rem;
    font-size: 0.875rem;
  }
  .error-messages strong { display: block; margin-bottom: 0.375rem; }
  .error-messages ul { margin-left: 1.25rem; }
  .error-messages li { margin-bottom: 0.125rem; }
</style>

<div class="recipe-form">
  <% if recipe.errors.any? %>
    <div class="error-messages">
      <strong><%= pluralize(recipe.errors.count, "error") %> prohibited this recipe from being saved:</strong>
      <ul>
        <% recipe.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <%= form_with(model: recipe) do |f| %>
    <div class="form-group">
      <%= f.label :name %>
      <%= f.text_field :name %>
    </div>

    <div class="form-group">
      <%= f.label :description %>
      <%= f.text_area :description %>
    </div>

    <div class="form-row">
      <div class="form-group">
        <%= f.label :difficulty %>
        <%= f.select :difficulty, [["Easy", "easy"], ["Medium", "medium"], ["Hard", "hard"]], prompt: "Select difficulty" %>
      </div>
      <div class="form-group">
        <%= f.label :servings %>
        <%= f.number_field :servings, min: 1 %>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <%= f.label :prep_time_minutes, "Prep Time (min)" %>
        <%= f.number_field :prep_time_minutes, min: 1 %>
      </div>
      <div class="form-group">
        <%= f.label :cook_time_minutes, "Cook Time (min)" %>
        <%= f.number_field :cook_time_minutes, min: 1 %>
      </div>
    </div>

    <div class="form-group">
      <%= f.label :image_url, "Image URL" %>
      <%= f.url_field :image_url %>
    </div>

    <div class="ingredients-fields">
      <h4>Ingredients</h4>
      <%= f.fields_for :ingredients do |ingredient_form| %>
        <div class="ingredient-row">
          <%= ingredient_form.text_field :quantity, placeholder: "Qty" %>
          <%= ingredient_form.text_field :unit, placeholder: "Unit" %>
          <%= ingredient_form.text_field :name, placeholder: "Ingredient name" %>
          <%= ingredient_form.check_box :_destroy, style: "display:none" %>
          <%= link_to "Ã—", "#", class: "remove-link", onclick: "this.previousElementSibling.checked=true;this.parentElement.style.display='none';return false;" %>
        </div>
      <% end %>
    </div>

    <div class="form-actions">
      <%= f.submit class: "btn btn-primary" %>
      <%= link_to "Cancel", recipes_path, class: "btn btn-secondary" %>
    </div>
  <% end %>
</div>
